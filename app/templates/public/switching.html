{% load static %}
{% load custom_tags %}

<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="{% static 'images/morea-sports.png' %}" type="image/x-icon" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"/>
    <link rel="stylesheet" href="{% static 'css/public/nav.css' %}">
    <link rel="stylesheet" href="{% static 'css/public/home.css' %}">
    <title>ATUM SPORTS</title>
</head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LM08HSDTFS"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-LM08HSDTFS');
</script>
<body>
    <div class="modal-mobile mobile"></div>
    <header>
        <nav>
            <img
                class="logo-jiifs"
                src="{% static 'images/ATUM-FAV-ICON.svg' %}"
                alt="JIIFS"
            />
            <ul>
                <li class="item-close mobile">
                    <img
                        class="icon-close mobile"
                        src="{% static 'images/icon-close.svg' %}"
                        alt="Menu"
                    />
                </li>
                <li><a href="{% url 'home_public' event.id %}" class="about-us-link">Home</a></li>
                <li><a href="{% url 'scoreboard_public' event.id %}" class="scoreboard-link">Placar</a></li>
                <li><a href="{% url 'switching' event.id %}" class="home-link">Chave</a></li>
                <li><a href="{% url 'events' %}" class="games-link">Eventos</a></li>
                <li><a href="{% url 'login' %}" class="about-us-link">Login</a></li>
            </ul>
            <img
                class="icon-burguer"
                src="{% static 'images/icon-burguer.svg' %}"
                alt="Menu"
            />
        </nav>
    </header>
    <main>
        <section></section>
        <section class="games">
            <div class="filters">
                <h2>Filtre por: </h2>
                <div class="search-game-filters">
                    <div class="search-games">
                        <img src="{% static 'images/icon-search.svg' %}" alt="" aria-hidden="true">
                        <input class="search-input" type="text" name="" id="" placeholder="Pesquisar" >
                    </div>
                    <form class="game-filters">
                        <div class="games-filter">
                            <img src="{% static 'images/icon-filter.svg'%}" alt="" aria-hidden="true">
                            <select name="sport" id="sport" onchange="this.form.submit();">
                                <option value="">Esporte</option>
                                {% for i in event_sports %}
                                <option value="{{i.id}}" {% if event_sport.id == i.id %} selected {% endif %}>{{i.get_sport_display}}</option>
                                {% endfor %}
                            </select>
                            <img class="icon-arrow" src="{% static 'images/arrow.svg'%}" alt="" aria-hidden="true">
                        </div>
                        <div class="games-filter">
                            <img src="{% static 'images/icon-filter.svg'%}" alt="" aria-hidden="true">
                            <select name="genre" id="genre" onchange="this.form.submit();">
                                <option value="">GÃªnero</option>
                                {% for i, j in sexo_types %}
                                <option value="{{i}}" {% if genre|stringformat:"s" == i|stringformat:"s" %} selected {% endif %}>{{j}}</option>
                                {% endfor %}
                            </select>
                            <img class="icon-arrow" src="{% static 'images/arrow.svg'%}" alt="" aria-hidden="true">
                        </div>
                        <div class="games-filter">
                            <img src="{% static 'images/icon-filter.svg'%}" alt="" aria-hidden="true">
                            <select name="phase" id="status" onchange="this.form.submit();">
                                <option value="">Fases</option>
                                {% for k, l in phase_types %}
                                <option value="{{k}}" {% if phase|stringformat:"s" == k|stringformat:"s" %} selected {% endif %}>{{l}}</option>
                                {% endfor %}
                            </select>
                            <img class="icon-arrow" src="{% static 'images/arrow.svg'%}" alt="" aria-hidden="true">
                        </div>
                    </form>
                </div>
            </div>
            {% for phase in phases %}
            <div class="phase">
                <div class="phase-title">{{ phase.get_name_display }} | {{ phase.event.get_sport_display }} {{ phase.get_sexo_display }}</div>

                <div class="matches">
                    {% for match in matches_by_phase|get_item:phase.id %}
                        <div class="match-card {% if match.group_phase.phase.name == 3 %}final-match{% endif %}">
                            <div class="match-header">
                                <span>Q{{ match.id }} {% if not match.group_phase.name == "Unico" %} - {{ match.group_phase.name }} {% endif %}</span>
                                <span>{{ match.time_match|date:"d/m - H:i" }}</span>
                            </div>

                            {% for tm in match.teams.all %}
                                <div class="team {% if match.Winner_team == tm.team %}winner{% endif %}">
                                    <span class="team-name">{{ tm.team.name }}</span>
                                    <span class="team-score">
                                        {{ tm.point_set.count }}
                                    </span>
                                </div>
                            {% endfor %}

                            <div class="match-info">
                                <span>{{ match.location }}</span>
                                <span>{{ match.time_match|timesince }}</span>
                            </div>
                        </div>
                    {% empty %}
                    <section class="alert-page">
                        <div class="alert-img"> <i class="fa-solid fa-circle-exclamation"></i> </div>
                        <div class="alert-text">
                            <p>NENHUMA PARTIDA NESSA FASE.</p>
                        </div>
                    </section>
                    {% endfor %}
                </div>
            </div>
            {% empty %}
            <section class="alert-page">
                <div class="alert-img"> <i class="fa-solid fa-circle-exclamation"></i> </div>
                <div class="alert-text">
                    <p>NENHUMA PARTIDA ENCONTRADA.</p>
                </div>
            </section>
            {% endfor %}

        </section>
        <section class="today-games">
            <h2>Chaveamentos</h2>
            <div class="today-games-container">
                <div class="today-games">
                    {% for i in phases_all %}
                        <div class="today-game" style="padding-inline: 40px;">
                            <p class="team-a" style="text-align: right;">
                                {{ i.event.get_sport_display }} {{ i.get_sexo_display }} 
                            </p>
                            {% if i.event.sport == 1 %}<img class="sport" src="{% static 'images/ball-of-volley.png' %}" alt="" aria-hidden="true">{% else %}<img class="sport" src="{% static 'images/ball-of-futsal.png' %}" alt="" aria-hidden="true">{% endif %}
                            <p class="team-b" style="text-align: left;">
                                {{ i.get_name_display }}
                            </p>
                        </div>
                        <br>
                    {% endfor %}

                </div>                
                
            </div>
        </section>
    </main>
    <footer>
        <img
            src="{% static 'images/logo-ifs-white.png' %}"
            alt=""
            class="logo-ifs"
        />
        <img
            src="{% static 'images/logo-morea-colorful.svg' %}"
            alt=""
            class="logo-ifs"
        />
    </footer>
    <nav class="mobile-menu-functions">
        <ul class="menu-of-functions">
            <li class="games-mobile activate">Geral</li>
            <li class="today-mobile">Jogos do dia</li>
        </ul>
    </nav>
    <script src="{% static 'js/home.js' %}"></script>

</body>
</html>
